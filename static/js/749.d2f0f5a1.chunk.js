"use strict";(self.webpackChunkCotizador=self.webpackChunkCotizador||[]).push([[749],{29749:function(e,t,r){r.r(t);var n=r(26608),a=r(10389),c=r(9817),l=r(99499),o=r(43693),i=r(7738),u=r(4569),s=r(50465),m=r(84762),p=r(81787),d=r(89579),f=r(98848),Z=r(43157),v=r.n(Z),h=r(92210),b=r(643),E={labelCol:{span:4},wrapperCol:{span:14}},y={required:"This field is required!",types:{email:"Not a validate email!",number:"Not a validate number!"},number:{range:"Must be between ${min} and ${max}"}};Object.filter=function(e,t){return Object.keys(e).filter((function(r){return t(e[r])})).reduce((function(t,r){return t[r]=e[r],t}),{})};t.default=function(e){var t=e.history,r=e.match,Z=(0,i.useState)(null),w=(0,o.Z)(Z,2),g=w[0],C=w[1],k=(0,i.useState)([]),I=(0,o.Z)(k,2),x=I[0],j=I[1],S=(0,i.useState)(!0),T=(0,o.Z)(S,2),H=T[0],q=T[1],A=r.params.productid;(0,i.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,r,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("jwt"),r={url:f.CT+"/product/"+A,method:"GET",headers:{"Content-Type":"application/json","jwt-token":t}},e.next=5,v().request(r);case 5:n=e.sent,C(n.data),j(n.data.prices),q(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[A]);var P=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(r){var n,l,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.filter(r,(function(e){return void 0!==e})))._id=A,n=(0,a.Z)((0,a.Z)({},n),{},{prices:x}),n=(0,a.Z)((0,a.Z)({},n),{},{custom:!!g.custom}),l=localStorage.getItem("jwt"),e.prev=5,o={url:f.CT+"/product/",method:"PUT",data:n,headers:{"Content-Type":"application/json","jwt-token":l}},e.next=9,v().request(o);case 9:u.ZP.success({content:"Producto editado con exito"}),q(!1),t.push(f.sH+"/products"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),q(!1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return H?i.createElement(h.Z,{cover:"content"}):i.createElement(s.Z,null,i.createElement(m.Z,Object.assign({},E,{name:"add-product",onFinish:P,validateMessages:y,initialValues:(0,a.Z)({},g)}),i.createElement(m.Z.Item,{name:["sku"],label:"SKU",rules:[{required:!0}]},i.createElement(p.Z,null)),i.createElement(m.Z.Item,{name:["name"],label:"Nombre",rules:[{required:!0}]},i.createElement(p.Z,null)),i.createElement(m.Z.Item,{name:["resume"],label:"Resumen"},i.createElement(p.Z,null)),i.createElement(m.Z.Item,{name:["keywords"],label:"Palabras clave"},i.createElement(p.Z,null)),i.createElement(m.Z.Item,{name:["photo"],label:"Foto URL"},i.createElement(p.Z,null)),i.createElement(m.Z.Item,{name:["description"],label:"Descripci\xf3n"},i.createElement(p.Z.TextArea,null)),x.map((function(e,t){return i.createElement(s.Z,{key:"".concat(t),title:"Precio ".concat(t+1)},i.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.createElement("div",{style:{width:"90%"}},i.createElement(m.Z.Item,{label:"Precio"},i.createElement(p.Z,{value:e.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),onChange:function(e){return function(e,t){var r=e.target.value.toString().replace(/\$\s?|(,*)/g,"");if((r.match(/^\d+\.\d+$/)||r.match(/^\d+$/)||""===r)&&!(r<0)){var a=(0,n.Z)(x);a[t].price=""!==r?parseInt(r):0,j(a)}}(e,t)}})),i.createElement(m.Z.Item,{label:"Descripcion"},i.createElement(p.Z.TextArea,{value:e.description,onChange:function(e){return function(e,t){var r=(0,n.Z)(x);r[t].description=e.target.value,j(r)}(e,t)}}))),i.createElement(d.Z,{onClick:function(){return function(e){var t=(0,n.Z)(x);t.splice(e,1),j(t)}(t)}},i.createElement(b.Z,{style:{color:"red"}}))))})),i.createElement(m.Z.Item,{wrapperCol:(0,a.Z)((0,a.Z)({},E.wrapperCol),{},{offset:4})},i.createElement(d.Z,{onClick:function(){j([].concat((0,n.Z)(x),[{price:0,description:""}]))}},"Agregar precio")),i.createElement(m.Z.Item,{wrapperCol:(0,a.Z)((0,a.Z)({},E.wrapperCol),{},{offset:4})},i.createElement(d.Z,{type:"primary",htmlType:"submit"},"Guardar"),i.createElement(d.Z,{type:"ghost",onClick:function(){return t.push(f.sH+"/products")},style:{marginLeft:"15px"}},"Volver"))))}},643:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(1413),a=r(7738),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},l=r(4622),o=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:c}))};o.displayName="DeleteFilled";var i=a.forwardRef(o)},26608:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(53);var a=r(15449);function c(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=749.d2f0f5a1.chunk.js.map