"use strict";(self.webpackChunkCotizador=self.webpackChunkCotizador||[]).push([[173],{70612:function(e,t,r){var n=r(35737);t.Z=function(e,t,r){var o,a=new RegExp("".concat(r),"i"),c=[],i=(0,n.Z)(e);try{for(i.s();!(o=i.n()).done;){var s,l=o.value,u=(0,n.Z)(t);try{for(u.s();!(s=u.n()).done;){var p=s.value;if(p.indexOf(".")>0){var d=l[p.split(".")[0]],f=p.split(".")[1];if(a.test(d[f])){c.push(l);break}}else if(a.test(l[p])){c.push(l);break}}}catch(x){u.e(x)}finally{u.f()}}}catch(x){i.e(x)}finally{i.f()}return c}},57733:function(e,t){t.Z=function(e,t,r){return"number"===typeof e[r]&&"number"===typeof t[r]?e[r]-t[r]:"string"===typeof e[r]&&"string"===typeof t[r]?(e=e[r].toLowerCase())>(t=t[r].toLowerCase())?-1:t>e?1:0:"boolean"===typeof e[r]&&"boolean"===typeof t[r]?!!e:void 0}},24173:function(e,t,r){r.r(t);var n=r(43693),o=r(9817),a=r(35737),c=r(99499),i=r(7738),s=r(49073),l=r(4569),u=r(81787),p=r(89579),d=r(62780),f=r(88770),x=r(91972),m=r(74193),v=r(30531),g=r(98848),h=r(43157),C=r.n(h),y=r(92210),T=r(70612),S=r(57733),b=r(8340),Z=r(39180),E=r.n(Z),k=(r(91791),r(57209));E().locale("es");var w=function(e){return fetch(e,{mode:"cors"}).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,r){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.onerror=r,n.readAsDataURL(e)}))}))},I=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t,r,n){var c,i,s,l,u,p,d,f,x,m,v,h,y,T,S,Z,k,I,A,F,N,P,O,D,z,R,U,q,j,M,L,H,Y,_,B,G,$,V,K,J,Q,W;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),p=t.customer,e.prev=2,d=localStorage.getItem("jwt"),f={url:g.CT+"/customer/"+p._id,method:"GET",headers:{"Content-Type":"application/json","jwt-token":d}},e.next=7,C().request(f);case 7:x=e.sent,p=x.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:return m=new b.kH("p","pt","letter",!0),e.prev=15,e.next=18,w("".concat(g.CT,"/image/").concat(r.logo));case 18:v=e.sent,m.addImage(v,"jpeg",10,10,100,100,void 0,"FAST"),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(15);case 24:return e.prev=24,e.next=27,w("".concat(g.CT,"/image/").concat(r.logo2));case 27:h=e.sent,m.addImage(h,"jpeg",250,10,350,100,void 0,"FAST"),e.next=33;break;case 31:e.prev=31,e.t2=e.catch(24);case 33:m.setFont("Helvetica"),m.setFontSize(10),r.mainColor?m.setTextColor(r.mainColor):m.setTextColor("#000b57"),m.text(120,20,r.name),r.businessName&&m.text(120,35,r.businessName),r.phone&&m.text(120,50,"Cel ".concat(r.phone)),r.address&&m.text(120,65,r.address),r.webAddress&&m.text(120,80,r.webAddress),m.text(120,95,r.email),r.nit&&m.text(120,110,"NIT ".concat(r.nit)),m.setFontSize(8),m.rect(10,130,590,65),m.setFont("Helvetica","bold"),m.text(15,145,"FECHA:"),m.text(15,160,"RAZON SOCIAL:"),m.text(15,175,"CONTACTO:"),m.text(15,190,"TELEFONO:"),m.text(200,145,"CIUDAD:"),m.text(200,175,"E-MAIL:"),m.text(200,190,"VENDEDOR:"),m.text(320,145,"NIT:"),m.text(400,160,"TIEMPO DE ENTREGA:"),m.text(400,175,"VALIDEZ DE LA PROPUESTA:"),m.text(400,190,"FORMA DE PAGO:"),r.secondaryColor?m.setTextColor(r.secondaryColor):m.setTextColor("#fc6100"),m.text(400,145,"COTIZACION No.".concat(t.quoteNumber)),m.setFont("Helvetica","normal"),m.setTextColor("#000"),m.text(50,145,E()(t.createdAt).format("MMMM DD [DEL A\xd1O] YYYY").toUpperCase()),p.businessName&&m.text(81,160,p.businessName.toUpperCase()),p.name&&m.text(66,175,p.name.toUpperCase()),p.phone&&m.text(64,190,p.phone.toString().toUpperCase()),p.address&&m.text(238,145,p.address.toString().toUpperCase()),(null===(c=p.email)||void 0===c?void 0:c.length)>28&&m.setFontSize(5.6),p.email&&m.text(234,175,p.email.toString().toUpperCase()),m.setFontSize(8),(null===(i=t.seller)||void 0===i?void 0:i.length)>28&&m.setFontSize(5.6),t.seller&&m.text(250,190,t.seller.toString().toUpperCase()),m.setFontSize(8),p.nit&&m.text(338,145,p.nit.toString().toUpperCase()),((null===(s=t.deliveryTime)||void 0===s?void 0:s.length)>15||(null===(l=t.validityPeriod)||void 0===l?void 0:l.length)>15)&&m.setFontSize(6),t.deliveryTime&&m.text(490,160,t.deliveryTime.toString().toUpperCase()),m.setFontSize(8),t.validityPeriod&&m.text(517,175,t.validityPeriod.toString().toUpperCase()),(null===(u=t.wayToPay)||void 0===u?void 0:u.length)>15&&m.setFontSize(6),t.wayToPay&&m.text(472,190,t.wayToPay.toString().toUpperCase()),m.setFontSize(8),m.rect(10,200,190,20),m.rect(200,200,200,20),m.rect(400,200,50,20),m.rect(450,200,80,20),m.rect(530,200,70,20),r.mainColor?m.setTextColor(r.mainColor):m.setTextColor("#000b57"),m.setFont("Helvetica","bold"),m.text(85,212,"IMAGEN"),m.text(280,212,"DESCRIPCI\xd3N"),m.text(405,212,"CANTIDAD"),m.text(455,212,"PRECIO UNITARIO"),m.text(535,212,"PRECIO TOTAL"),m.setTextColor("#000"),y=220,T=(0,a.Z)(t.products),e.prev=95,T.s();case 97:if((S=T.n()).done){e.next=122;break}return k=S.value,y>550&&(m.addPage(),y=15),e.prev=100,e.next=103,w("".concat("/"===k.product.photo[0]?"https://catalogospromocionales.com"+k.product.photo:k.product.photo));case 103:I=e.sent,m.addImage(I,"jpeg",45,y+15,120,120,void 0,"FAST"),e.next=109;break;case 107:e.prev=107,e.t3=e.catch(100);case 109:if(m.setFont("Helvetica","bold"),A=y+10,k.product.name){for(F=k.product.name;F.length>45;){for(N=0;" "!==F[45-N]&&N<45;)N++;A+=10,m.text(220,A,F.slice(0,45-N)),F=F.replace(F.slice(0,45-N+1),"")}A+=10,m.text(220,A,F)}if(A+=10,k.product.sku&&m.text(220,A,k.product.sku.toString()),m.setFont("Helvetica","normal"),P=y+20,null!==(Z=k.product)&&void 0!==Z&&Z.description){O=(O=(O=(O=(O=(O=(O=(O=(O=(O=(O=k.product.description.replace(/&aacute;/gi,"\xe1")).replace(/&eacute;/gi,"\xe9")).replace(/&iacute;/gi,"\xed")).replace(/&oacute;/gi,"\xf3")).replace(/&uacute;/gi,"\xfa")).replace(/&ntilde;/gi,"\xf1")).replace(/(<a)([\s\S]*?)(<\/a>)/gi,"")).replace(/&nbsp;/gi,"")).replace(/<span[\s\S]*?>|<\/span>/gi,"")).replace(/<strong>|<\/strong>/gi,"")).split("<br />\r\n"),D=[],z=(0,a.Z)(O);try{for(z.s();!(R=z.n()).done;)U=R.value,D=D.concat(U.split("\n"))}catch(o){z.e(o)}finally{z.f()}for(O=D,A+=20,q=0;q<O.length;q++){for(j=O[q];j.length>40;){for(M=0;" "!==j[40-M]&&M<40;)M++;A+=10,m.text(220,A,j.slice(0,40-M)),j=j.replace(j.slice(0,40-M+1),"")}A+=10,m.text(220,A,j)}for(m.setTextColor("#ff0000"),A+=5,O=(O=(O=""!==k.observations?"Observacion: ".concat(k.observations):"").replace("\n\n\n","\n")).split("\n"),L=0;L<O.length;L++){for(H=O[L];H.length>45;){for(A+=10,Y=0;" "!==H[45-Y]&&Y<45;)Y++;m.text(220,A,H.slice(0,45-Y)),H=H.replace(H.slice(0,45-Y),"")}A+=10,m.text(220,A,H)}A-y>150&&(P=A)}if(m.setTextColor("#000000"),k.markings){_=y,B=(0,a.Z)(k.markings);try{for(B.s();!(G=B.n()).done;)$=G.value,m.rect(400,_,200,10),r.secondaryColor?m.setTextColor(r.secondaryColor):m.setTextColor("#fc6100"),$.name?null!==(V=$.ink)&&void 0!==V&&V.name?m.text(502,_+8,"".concat($.name," - ").concat($.ink.name),"center"):m.text(502,_+8,$.name,"center"):m.text(502,_+8,"Sin marcacion","center"),_+=10,m.setTextColor("#000"),m.text(445,_+8,"".concat($.amount),"right"),null!==$.unitPrice?m.text(525,_+8,"$ ".concat(parseInt($.unitPrice).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),"right"):m.text(525,_+8,"$ 0","right"),null!==$.totalPrice?m.text(595,_+8,"$ ".concat(parseInt($.totalPrice).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),"right"):m.text(595,_+8,"$ 0","right"),_+=10}catch(o){B.e(o)}finally{B.f()}_-y>150&&(P=_)}P-y>150?(m.rect(10,y,190,P-y+10),m.rect(200,y,200,P-y+10),m.rect(400,y,200,P-y+10),y+=P-y+10):(m.rect(10,y,190,150),m.rect(200,y,200,150),m.rect(400,y,200,150),y+=150);case 120:e.next=97;break;case 122:e.next=127;break;case 124:e.prev=124,e.t4=e.catch(95),T.e(e.t4);case 127:return e.prev=127,T.f(),e.finish(127);case 130:for(y+=15,m.setTextColor("#000000"),m.setFontSize(10),K=(K=t.generalObservations).split("\n"),J=0;J<K.length;J++){for(Q=K[J];Q.length>100;){for(y+=10,W=0;" "!==Q[100-W]&&W<100;)W++;m.text(10,y,Q.slice(0,100-W)),Q=Q.replace(Q.slice(0,100-W),""),y>=780&&(m.addPage(),y=10)}y>=780&&(m.addPage(),y=10),y+=10,m.text(10,y,Q)}m.save(),n(!1);case 138:case"end":return e.stop()}}),e,null,[[2,11],[15,22],[24,31],[95,124,127,130],[100,107]])})));return function(t,r,n){return e.apply(this,arguments)}}();t.default=function(e){var t=e.history,r=(0,i.useState)(!0),a=(0,n.Z)(r,2),h=a[0],b=a[1],Z=(0,i.useState)([]),w=(0,n.Z)(Z,2),A=w[0],F=w[1],N=(0,i.useState)([]),P=(0,n.Z)(N,2),O=P[0],D=P[1],z=(0,i.useContext)(k.S).user;(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var t,r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("jwt"),r={url:g.CT+"/quote/",method:"GET",headers:{"Content-Type":"application/json","jwt-token":t}},e.next=5,C().request(r);case 5:n=e.sent,F(n.data),D(n.data),b(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var R=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.push(g.sH+"/editquote/"+r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(A.filter((function(e){return e._id!==t}))),e.prev=1,r=localStorage.getItem("jwt"),n={url:g.CT+"/quote/"+t,method:"DELETE",headers:{"Content-Type":"application/json","jwt-token":r}},e.next=6,C().request(n);case 6:l.ZP.success({content:"Successfully deleted quote",duration:5}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),q=[{title:"Numero",dataIndex:"quoteNumber",key:"quoteNumber",sorter:function(e,t){return(0,S.Z)(e,t,"quoteNumber")}},{title:"Raz\xf3n Social",dataIndex:"customer",key:"customer",render:function(e){return i.createElement("p",null,e.businessName)},sorter:function(e,t){return(0,S.Z)(e,t,"customer.businessName")}},{title:"Cliente",dataIndex:"customer",key:"customer",render:function(e){return i.createElement("p",null,e.name)},sorter:function(e,t){return(0,S.Z)(e,t,"customer.name")}},{title:"Fecha de creacion",dataIndex:"createdAt",key:"createdAt",render:function(e){return i.createElement("p",null,E()(e).format("MMMM DD YYYY"))},sorter:function(e,t){return(0,S.Z)(e,t,"createdAt")}},{title:"Tiempo de entrega",dataIndex:"deliveryTime",key:"deliveryTime",sorter:function(e,t){return(0,S.Z)(e,t,"deliveryTime")}},{title:"Forma de pago",dataIndex:"wayToPay",key:"wayToPay",sorter:function(e,t){return(0,S.Z)(e,t,"wayToPay")}},{title:"Acciones",dataIndex:"_id",key:"_id",render:function(e,t){return function(e,t,r,o,a){var c=(0,i.useState)(!1),l=(0,n.Z)(c,2),u=l[0],p=l[1];return i.createElement("div",null,u?i.createElement(f.Z,{style:{fontSize:"25px",marginRight:"15px"}}):i.createElement(x.Z,{onClick:function(){return I(t,r,p)},style:{fontSize:"25px",marginRight:"15px"}}),i.createElement(m.Z,{onClick:function(){return a(e)},style:{fontSize:"25px",marginRight:"15px"}}),i.createElement(s.Z,{title:"Sure to delete?",onConfirm:function(){return o(e)}},i.createElement(v.Z,{style:{fontSize:"25px"}})))}(e,t,z,U,R)}}];return h?i.createElement(y.Z,{cover:"content"}):i.createElement("div",null,i.createElement("div",{style:{flexDirection:"row",display:"flex",marginBottom:"20px"}},i.createElement(u.Z.Search,{allowClear:!0,placeholder:"Search",onSearch:function(e){var t;(t=e).length>0?F((0,T.Z)(O,["quoteNumber","customer.name","seller"],t)):F(O)},style:{marginRight:"4px"},enterButton:!0}),i.createElement(p.Z,{onClick:function(){return t.push(g.sH+"/addquote")},style:{marginBottom:"20px"}},"Crear cotizacion")),i.createElement(d.Z,{onRow:function(e,t){return{onDoubleClick:function(){R(e._id)}}},columns:q,dataSource:A,rowKey:"_id"}))}}}]);
//# sourceMappingURL=173.eac530df.chunk.js.map